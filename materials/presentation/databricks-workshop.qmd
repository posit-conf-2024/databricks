---
format: 
  revealjs:
    width: 1400
    height: 740
    max-scale: 1
    min-scale: 1
    smaller: true
    transition: fade
    background-transition: fade
    theme: theme.scss
    code-line-numbers: false
    menu: false
execute: 
  echo: false
engine: knitr
---

# {background-image="assets/background/title-slide-white.png" background-size="1500px" background-color="white"}

::: {.content-slide}
**Using** **Databricks** <br/> **with** **R** 
:::

::: {.content-slide-thin}
Workshop 
<br/>
August 12
:::


## Housekeeping items {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

::: columns
::: {.column width="20%"}
:::

::: {.column width="60%"}
::: custom
-   **posit::conf** mobile app
-   Wi-fi password
-   Accessing your server
:::
:::
:::

##  {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

::: columns
::: {.column width="60%"}
::: schedule1
<br/> Schedule
:::
:::

::: {.column width="40%"}
::: schedule
**9am - 10:30am**

Break (30mins)

**11am - 12:30pm**

Lunch (1hr)

**1:30pm - 3pm**

Break (30mins)

**3:30pm - 5pm**
:::
:::
:::

## The team {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

\[TODO: add names and pictures\]

## Materials {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

::: columns
::: {.column width="30%"}
:::

::: {.column width="60%"}
::: custom
-   Posit Server
-   Databricks Cluster
-   Deck
-   Exercise book
:::
:::
:::

## {background-image="assets/background/content.png" background-size="1500px" background-color="#2a7070"}

:::{.content-slide-title}
Unit 1
:::

:::{.content-slide}
Accessing <br/> Databricks 
:::

## {background-image="assets/background/green.png" background-size="1500px" background-color="#799857"}

:::{.green-slide}
Exercises 1.1 - 1.2
:::

## {background-image="assets/background/green.png" background-size="1500px" background-color="#799857"}

:::{.green-slide}
Exercises 1.3 - 1.7
:::

## {background-image="assets/background/content.png" background-size="1500px" background-color="#2a7070"}

:::{.content-slide}
**A bit of **<br/>
**"mental** <br/>
**modeling"**
:::

## {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

:::{.content-slide-title}
Key concept ðŸ”‘
:::

<br/>

:::{.content-slide}
Data and processing <br/> need to be as **close** as possible
:::

## Working with Databricks {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}


![](assets/diagrams/topology.png){.absolute top="80" left="120" width="1100"}

## "Default" approach {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

![](assets/diagrams/topology.png){.absolute top="80" left="120" width="1100"}
![](assets/diagrams/data.png){.absolute top="210" left="850" width="120"}
![](assets/diagrams/data.png){.absolute top="610" left="850" width="120"}

## "Default" approach {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

![](assets/diagrams/topology.png){.absolute top="80" left="120" width="1100"}
![](assets/diagrams/data.png){.absolute top="210" left="850" width="120"}
![](assets/diagrams/data.png){.absolute top="610" left="850" width="120"}
![](assets/diagrams/processing.png){.absolute top="400" left="0" width="140"}
![](assets/diagrams/download-data.png){.absolute top="250" left="300" width="550"}


## Better approach! {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

![](assets/diagrams/topology.png){.absolute top="80" left="120" width="1100"}
![](assets/diagrams/data.png){.absolute top="210" left="850" width="120"}
![](assets/diagrams/data.png){.absolute top="610" left="850" width="120"}

## Better approach! {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

![](assets/diagrams/topology.png){.absolute top="80" left="120" width="1100"}
![](assets/diagrams/data.png){.absolute top="210" left="850" width="120"}
![](assets/diagrams/processing.png){.absolute top="260" left="825" width="140"}
![](assets/diagrams/processing.png){.absolute top="430" left="800" width="140"}
![](assets/diagrams/data.png){.absolute top="610" left="850" width="120"}

## Better approach! {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}


![](assets/diagrams/topology.png){.absolute top="80" left="120" width="1100"}
![](assets/diagrams/download-results.png){.absolute top="250" left="300" width="550"}
![](assets/diagrams/data.png){.absolute top="210" left="850" width="120"}
![](assets/diagrams/processing.png){.absolute top="260" left="825" width="140"}
![](assets/diagrams/processing.png){.absolute top="430" left="800" width="140"}
![](assets/diagrams/data.png){.absolute top="610" left="850" width="120"}



## {background-image="assets/background/content.png" background-size="1500px" background-color="#2a7070"}

:::{.content-slide-title}
Unit 2 & 3
:::

:::{.content-slide}
Using `dplyr`
:::

:::{.content-slide-thin}
/dee-plier/
:::

## Wrangle inside the database {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

![](assets/diagrams/extract-data.png){.absolute top="255" left="100" width="500"}

![](assets/diagrams/push-collect.png){.absolute top="140" left="800" width="500"}


## Options to "push compute" {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

<br/>

::: columns
::: {.column width="50%"}

:::{.push}
Write SQL statement
:::

<br/>

:::{.push-thin}

*SELECT*
  'o_orderpriority', 
  SUM('o_totalprice') AS 'total'
  <br/>
*FROM*
  'samples'.'tpch'.'orders'
  <br/>
*GROUP BY *
  'o_orderpriority'
:::

:::
::: {.column width="50%"}

:::{.push}
Use `dplyr` verbs
:::

<br/>

:::{.push-thin}
orders %>% <br/>
  *group_by*(o_orderpriority) %>% <br/>
  *summarise*(total = sum(o_totalprice, na.rm = TRUE))
:::

:::
:::

## Advantages {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}

::: columns
::: {.column width="60%"}

::: {.custom}
- `dplyr` translates to SQL
- Modularity of piped code
- All your code is in R!
:::

:::
::: {.column width="40%"}

![](assets/diagrams/dplyr-push.png){.absolute width="550"}
:::
:::

## {background-image="assets/background/green.png" background-size="1500px" background-color="#799857"}

:::{.green-slide}
Exercises 2.1 - 2.6
:::

## {background-image="assets/background/thank-you.png" background-size="1500px" background-color="#2a7070"}

![](assets/background/racoon.jpg){.absolute top="220" left="900" width="430"}

## Simple {background-image="assets/background/slide.png" background-size="1500px" background-color="white"}


## Frame Dark {background-image="assets/background/slide-frame-dark.png" background-size="1500px" background-color="#2a7070"}

## Frame Bright {background-image="assets/background/slide-frame.png" background-size="1500px" background-color="white"}


